# SPDX-License-Identifier: Apache-2.0
#
# Copyright (c) 2023, Nordic Semiconductor ASA

## A pykwalify schema for basic validation of the structure of a
## board metadata YAML file.
##
# The board.yml file is a simple list of key value pairs containing board
# information like: name, vendor, socs, variants.
schema;variant-schema:
  required: false
  type: seq
  sequence:
    - type: map
      mapping:
        name:
          required: true
          type: str
        cpucluster:
          required: false
          type: str
        variants:
          required: false
          include: variant-schema

type: map
mapping:
  board:
    required: true
    type: map
    mapping:
      name:
        required: true
        type: str
        desc: Name of the board
      vendor:
        required: false
        type: str
        desc: SoC family of the SoC on the board.
      revision:
        required: false
        type: map
        mapping:
          format:
            required: true
            type: str
            enum:
              ["major.minor.patch", "letter", "number", "fuzzy", "custom"]
          default:
            required: true
            type: str
          revisions:
            required: true
            type: seq
            sequence:
              - type: map
                mapping:
                  name:
                    required: true
                    type: str
      socs:
        required: false
        type: seq
        sequence:
        - type: map
          mapping:
            name:
              required: true
              type: str
            variants:
              include: variant-schema
      variants:
        include: variant-schema
